# Memory-ä¸è´Ÿæ—¶å…‰æ‘„å½±ç›¸å†Œ

![1754074172331](https://s2.loli.net/2025/08/02/EjIZ1X6MSHqUlTD.png)

![1754089150106](https://s2.loli.net/2025/08/02/o51PLHecODG9fZQ.png)

## ç®€ä»‹

ä¸€ä¸ªå…¨å±ç€‘å¸ƒæµæ‘„å½±å›¾åº“ï¼Œä¹Ÿæ˜¯ä¸“ä¸ºæ‘„å½±å¸ˆåšçš„ç‹¬ç«‹ç½‘ç»œç›¸å†Œç¨‹åºï¼Œå®ƒæ˜¯åŸºäº[Moment](https://github.com/Robert-Stackflow/Moment)äºŒæ¬¡å¼€å‘çš„ï¼Œæä¾›winã€macã€dockerä¸‰ç§ä½¿ç”¨ä½¿ç”¨æ–¹å¼ï¼Œæ”¯æŒäº‘ç«¯ä¸€é”®éƒ¨ç½²ï¼ŒåŠ å…¥äº†ä¸°å¯Œä¸ªæ€§åŒ–çš„ä¸€äº›åŠŸèƒ½ï¼Œä½ å¯ä»¥æœ¬åœ°ä½¿ç”¨æˆ–ä¸Šä¼ è‡³osså­˜å‚¨ï¼ŒåŒæ ·æ”¯æŒæ·»åŠ è§†é¢‘åŠä¸€é”®å¤‡ä»½ç­‰

æ¼”ç¤ºï¼šhttps://memory.noisework.cn

## ç‰¹å¾

- æ”¯æŒ linux/amd64 å’Œ linux/arm64 ä¸¤ä¸ªå¹³å°
- æ”¯æŒæœ¬åœ°ã€S3/R2ä¸‰ç§osså­˜å‚¨ä¸Šä¼ æ–¹å¼
- æ”¯æŒå¤šç§æ•°æ®åº“çš„é€‰æ‹©è¿æ¥ï¼Œæ”¯æŒä¸€é”®è¿ç§»ï¼Œä¸€é”®å¤‡ä»½æœ¬åœ°æ•°æ®åº“
- è‡ªé€‚åº”ç€‘å¸ƒæµå¸ƒå±€ï¼Œå‚è€ƒpinterest
- æ”¯æŒé¦–é¡µå¤šå¼ å°é¢å¤§å›¾çš„è‡ªå®šä¹‰è®¾ç½®
- æ”¯æŒç›¸å†Œåˆé›†ï¼Œé¦–é¡µä¼šæœ‰åˆé›†ä¸­å›¾ç‰‡æ•°æ˜¾ç¤º
- æ”¯æŒæ·»åŠ Bç«™ã€YouTubeã€ç›´é“¾è§†é¢‘ï¼Œå¯è‡ªåŠ¨è¯†åˆ«Bç«™ã€YouTubeé“¾æ¥å¹¶è§£æç›¸å…³è§†é¢‘ä¿¡æ¯
- æ”¯æŒåå°æ‰¹é‡ä¸Šä¼ ä¸åŒå­˜å‚¨æ¸ é“
- æ”¯æŒä¸Šä¼ å›¾ç‰‡å‰çš„å‹ç¼©å’Œä¸€é”®è½¬æ¢ä¸ºwebpæ ¼å¼çš„åŠŸèƒ½

## åŠ è½½ç‰¹æ€§

## ç¼©ç•¥å›¾åç¼€ä¼˜åŒ–
- ç³»ç»Ÿæ”¯æŒé…ç½® thumbnail_suffix å‚æ•°ï¼Œä¼šè‡ªåŠ¨åœ¨åŸå›¾URLåæ·»åŠ ç¼©ç•¥å›¾åç¼€
- å¦‚æœé…ç½®äº†ç¼©ç•¥å›¾åç¼€ï¼Œå°é¢ä¼šä½¿ç”¨ image.image_url + thumbnail_suffix çš„ä¼˜åŒ–ç‰ˆæœ¬
- å¦‚æœæ²¡æœ‰é…ç½®åç¼€ï¼Œåˆ™ç›´æ¥ä½¿ç”¨åŸå›¾URL
## å“åº”å¼å°ºå¯¸ä¼˜åŒ–
å°é¢å›¾ç‰‡ä¼šæ ¹æ®è®¾å¤‡ç±»å‹å’Œç½‘ç»œçŠ¶å†µåŠ¨æ€è°ƒæ•´å‚æ•°ï¼š

ç§»åŠ¨ç«¯ä¼˜åŒ–ï¼š

- å°ºå¯¸ï¼š180Ã—250åƒç´ 
- è´¨é‡ï¼šæ…¢ç½‘ç»œ30%ï¼Œæ­£å¸¸ç½‘ç»œ40%
- URLå‚æ•°ï¼š w=180&h=250&fit=crop&auto=compress,format&q=30-40
å¹³æ¿ç«¯ä¼˜åŒ–ï¼š

- å°ºå¯¸ï¼š250Ã—350åƒç´ 
- è´¨é‡ï¼šæ…¢ç½‘ç»œ35%ï¼Œæ­£å¸¸ç½‘ç»œ45%
- URLå‚æ•°ï¼š w=250&h=350&fit=crop&auto=compress,format&q=35-45
æ¡Œé¢ç«¯ä¼˜åŒ–ï¼š

- å°ºå¯¸ï¼š200Ã—280åƒç´ 
- è´¨é‡ï¼šæ…¢ç½‘ç»œ35%ï¼Œæ­£å¸¸ç½‘ç»œ45%
- URLå‚æ•°ï¼š w=200&h=280&fit=crop&auto=compress,format&q=35-45
## æ™ºèƒ½åŠ è½½ç­–ç•¥
- æ‡’åŠ è½½ ï¼šä½¿ç”¨ IntersectionObserver å®ç°è§†å£å†…æ‰åŠ è½½
- å¹¶å‘æ§åˆ¶ ï¼šé™åˆ¶åŒæ—¶åŠ è½½çš„å›¾ç‰‡æ•°é‡ï¼Œé¿å…ç½‘ç»œæ‹¥å¡
- é¢„åŠ è½½ ï¼šä¼˜å…ˆåŠ è½½å‰4-6å¼ å°é¢å›¾ç‰‡
- é”™è¯¯å¤„ç† ï¼šåŠ è½½å¤±è´¥æ—¶è‡ªåŠ¨å›é€€åˆ°åŸå›¾
- æ ¼å¼ä¼˜åŒ– ï¼šè‡ªåŠ¨è½¬æ¢ä¸ºWebPç­‰ç°ä»£æ ¼å¼
## æ€§èƒ½ä¼˜åŒ–ç‰¹æ€§
- ç¡¬ä»¶åŠ é€Ÿ ï¼šä½¿ç”¨ transform: translateZ(0) å¯ç”¨GPUåŠ é€Ÿ
- æ¸è¿›å¼åŠ è½½ ï¼šæ˜¾ç¤ºåŠ è½½åŠ¨ç”»å’Œè¿›åº¦æç¤º
- ç¼“å­˜æœºåˆ¶ ï¼šé¿å…é‡å¤åŠ è½½ç›¸åŒå›¾ç‰‡
- ç½‘ç»œæ£€æµ‹ ï¼šæ ¹æ®3G/4G/WiFiè°ƒæ•´åŠ è½½ç­–ç•¥

![1754074193119](https://s2.loli.net/2025/08/02/NnOJshlFMT3iEoC.png)

## å‰åç«¯è¿è¡Œ

å‰ç«¯ï¼šwebç›®å½•ä¸‹`npm run dev`

åç«¯ï¼š`python run.py`

## dockerè¿è¡Œ

```
docker run -d \
  --name memory \
  --platform linux/amd64 \
  -p 4314:9999 \
  --add-host host.docker.internal:host-gateway \
  -e DB_HOST=host.docker.internal \
  -e EXTERNAL_DB_HOST=host.docker.internal \
  -e TZ=Asia/Shanghai \
  noise233/memory:latest
```

å¦‚æœä½ æƒ³æŒ‚è½½æœ¬åœ°æ•°æ®åº“æ–‡ä»¶ï¼Œæ¯”å¦‚ï¼š

```
docker run -d \
  --name memory \
  --platform linux/amd64 \
  -p 4314:9999 \
  -v /www/wwwroot/memory.noisework.cn/data:/app/data \
  --add-host host.docker.internal:host-gateway \
  -e DB_HOST=host.docker.internal \
  -e EXTERNAL_DB_HOST=host.docker.internal \
  -e TZ=Asia/Shanghai \
  noise233/memory:latest
```

è¿æ¥ [Neon å…è´¹æ•°æ®åº“](https://neon.com/)çš„ Docker è¿è¡Œå‘½ä»¤

```
docker run -d \
  --name memory \
  --platform linux/amd64 \
  -p 4314:9999 \
  -e DATABASE_URL="postgresql://username:password@ep-xxx-xxx.us-east-2.aws.neon.tech/dbname?sslmode=require" \
  -e TZ=Asia/Shanghai \
  noise233/memory:latest
```

## docker-compose

ç”±äºæ¡Œé¢ç‰ˆå’Œdockeråç«¯apiæœ‰å†²çªï¼Œdockerè¯·ä½¿ç”¨/api/v1ï¼Œå¦‚æœä½ æƒ³è‡ªå·±æ„å»ºdockerï¼š

`web/.env.productuon`è¯·ä¿®æ”¹ä¸º

```
# èµ„æºå…¬å…±è·¯å¾„,éœ€è¦ä»¥ /å¼€å¤´å’Œç»“å°¾
VITE_PUBLIC_PATH = '/'

# æ˜¯å¦å¯ç”¨ä»£ç†
VITE_USE_PROXY = true

# base api
VITE_BASE_API = '/api/v1'
```

`web/.env.development`è¯·ä¿®æ”¹ä¸º

```
# Dockerç¯å¢ƒä¸‹çš„å‰ç«¯é…ç½®
# èµ„æºå…¬å…±è·¯å¾„,éœ€è¦ä»¥ /å¼€å¤´å’Œç»“å°¾
VITE_PUBLIC_PATH = '/'

# æ˜¯å¦å¯ç”¨ä»£ç† - Dockerç¯å¢ƒä¸‹ä¸éœ€è¦ä»£ç†
VITE_USE_PROXY = false

# base api - Dockerç¯å¢ƒä¸‹ä½¿ç”¨ç›¸å¯¹è·¯å¾„
VITE_BASE_API = '/api/v1'
```

ç„¶åè¿è¡Œ

```
docker-compose up -d
```

## ğŸš€ ä¸€é”®éƒ¨ç½²

### æœ¬åœ°å¿«é€Ÿéƒ¨ç½²

```bash
# ä½¿ç”¨ä¸€é”®éƒ¨ç½²è„šæœ¬
./deploy.sh
```

### äº‘å¹³å°éƒ¨ç½²

æˆ‘ä»¬æ”¯æŒå¤šç§äº‘å¹³å°çš„ä¸€é”®éƒ¨ç½²ï¼Œè¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹ï¼š

ğŸ“– **[å®Œæ•´éƒ¨ç½²æŒ‡å—](./DEPLOYMENT.md)**

æ”¯æŒçš„å¹³å°ï¼š
- [Zeabur](https://zeabur.com) - ä½¿ç”¨ `zeabur.json`
- [Fly.io](https://fly.io) - ä½¿ç”¨ `fly.toml`
- [Railway](https://railway.app) - ä½¿ç”¨ `railway.json`
- [Render](https://render.com) - ä½¿ç”¨ `render.yaml`
- Docker / Docker Compose - æœ¬åœ°éƒ¨ç½²

å‘å¸ƒ

```
docker buildx build --platform linux/amd64,linux/arm64 -t noise233/memory:latest --push --no-cache .
```

Podmanï¼ˆæ›¿ä»£Dockerï¼‰

```
podman manifest create noise233/memory:latest
podman build --platform linux/amd64 --manifest noise233/memory:latest .
podman build --platform linux/arm64 --manifest noise233/memory:latest .
podman manifest push noise233/memory:latest
```

```
podman manifest create noise233/memory:dev
podman build --platform linux/amd64 --manifest noise233/memory:dev .
podman build --platform linux/arm64 --manifest noise233/memory:dev .
podman manifest push noise233/memory:dev
```

## Dockerä¸‹ä½¿ç”¨

- ä½¿ç”¨`<æœåŠ¡å™¨IPåœ°å€>:4314`æˆ–`åŸŸå`è®¿é—®ç›¸å†Œ
- åå°ç®¡ç†ï¼š`<æœåŠ¡å™¨IPåœ°å€>:4314/admin/`æˆ–`<åŸŸå>/admin`
- é»˜è®¤ç®¡ç†å‘˜è´¦å·ï¼š`admin`ï¼Œå¯†ç ï¼š`123456`ï¼Œè¯·ç™»å½•ååŠæ—¶ä¿®æ”¹ç”¨æˆ·åå’Œå¯†ç 

## åå°é…ç½®ä½¿ç”¨æŒ‡å—

- ç³»ç»Ÿè®¾ç½®

  é€šç”¨è®¾ç½®ä¸ºåå°å·¥ä½œå°æ˜¾ç¤ºè®¾ç½®

- ç½‘ç«™è®¾ç½®

  æ”¯æŒiconã€logoã€ç½‘ç«™åç§°ã€å°é¢è‡ªå®šä¹‰è®¾ç½®

- å†…å®¹è®¾ç½®

  é¦–é¡µæ¯æ¬¡åŠ è½½å›¾ç‰‡æ•°ä¸ºæ¯ä¸€é¡µåŠ è½½æ˜¾ç¤ºçš„å›¾ç‰‡æ•°ï¼Œæ”¯æŒç•¥ç¼©å›¾çš„åç¼€ï¼Œä½†ä¸è¦è½»æ˜“è®¾ç½®

- å­˜å‚¨è®¾ç½®

  å…è®¸ä¸Šä¼ -é€‰é¡¹å¾ˆé‡è¦ï¼Œæ‰“å¼€æ‰æ”¯æŒå›¾ç‰‡çš„ä¸Šä¼ è®¾ç½®ï¼ˆåŒ…æ‹¬æ‰¹é‡ä¸Šä¼ ä¹Ÿä¾èµ–è¿™ä¸ªå¼€å…³ï¼‰

  æœ¬åœ°å­˜å‚¨-é»˜è®¤è·¯å¾„ä¸ºç¨‹åºå†…çš„imagesæ–‡ä»¶å¤¹ï¼Œä¸è¦è½»æ˜“è®¾ç½®urlå‰ç¼€ï¼Œå› ä¸ºç¨‹åºè‡ªåŠ¨è¯†åˆ«ä¸Šä¼ é“¾æ¥ï¼Œå¦‚æœä½ æœ‰è‡ªå®šä¹‰ç½‘å€ï¼Œå¯ä»¥å½“cdnåŠ é€Ÿå‰ç¼€ä½¿ç”¨

  å¤‡ä»½ç›¸å†Œ-æ£€æµ‹å¹¶æ‰“åŒ…ä¸‹è½½æœ¬åœ°ä¸Šä¼ çš„æ‰€æœ‰å›¾ç‰‡ï¼Œå¦‚æœæœ¬åœ°ä¸Šä¼ è¿‡å¤šå›¾ç‰‡é€Ÿåº¦ä¼šæ…¢

  å¤‡ä»½æ•°æ®åº“-ä»…é™æœ¬åœ°å­˜å‚¨æ¨¡å¼ï¼Œå¯ä¸€é”®ä¸‹è½½ç¨‹åºçš„æ•°æ®åº“æ–‡ä»¶

  äº‘ç«¯å­˜å‚¨-æ”¯æŒcloudflareR2\S3åŠå…¼å®¹osså­˜å‚¨ï¼Œä»¥cloudflarer2ä¸ºä¾‹ï¼š
  å‰å¾€https://cloudflare.comæ³¨å†Œï¼Œå¹¶åœ¨è´¦æˆ·ä¸»é¡µæ‰¾åˆ°â€œR2å¯¹è±¡å­˜å‚¨â€ï¼Œç‚¹å‡»â€œåˆ›å»ºå­˜å‚¨æ¡¶â€å¹¶è®¾ç½®å­˜å‚¨æ¡¶åç§°å¹¶ç‚¹å‡»apiè®¾ç½®ç®¡ç†å¯†é’¥ï¼Œå†ç‚¹å‡»å°†r2å’Œapié…åˆä½¿ç”¨é¢æ¿è®°å½•è´¦æˆ·ID

  ![1754664940776](https://s2.loli.net/2025/08/08/7lDVdAZSaR2OXqJ.png)

  ![222eq](https://s2.loli.net/2025/08/08/qmX75tv1frescgA.png)

  ç‚¹è¿›æ–°åˆ›å»ºçš„å­˜å‚¨æ¡¶ï¼Œæ‰¾åˆ°è®¾ç½®å¹¶ç‚¹å‡»å¯æŸ¥çœ‹å…·ä½“å­˜å‚¨ä¿¡æ¯

  å›åˆ°åå°é¡µï¼š

  ç«¯ç‚¹ï¼ˆEndpointï¼‰-å¯¹åº”S3 API

  åŒºåŸŸ-å¯¹åº”ä½ç½®ï¼Œåªå¡«å†™è‹±æ–‡å¦‚APAC

  è®¿é—®ID-å¯¹åº”å¸æˆ·ID,åœ¨apiè®¾ç½®å°†r2å’Œapié…åˆä½¿ç”¨é¢æ¿ä¸­

  è®¿é—®å¯†é’¥-APIå¯†é’¥

  å­˜å‚¨æ¡¶ï¼ˆBucketï¼‰-å­˜å‚¨æ¡¶åç§°

  å­˜å‚¨è·¯å¾„-é»˜è®¤æŒ‰å¹´æœˆæ—¥è·¯å¾„ï¼š{year}/{month}/{timestamp}_{filename}

  URLå‰ç¼€-å¯¹åº”å…¬å…±å¼€å‘ URLæˆ–è€…è‡ªå®šä¹‰åŸŸå

  URLåç¼€-éå¿…è¦ä¸ç”¨å¡«å†™

- Tokenè®¾ç½®

  æ˜¯ä¸ºå¤–éƒ¨é“¾æ¥ç›¸å†Œä½¿ç”¨çš„ï¼Œæ˜¯ä¸ºæœªæ¥åšæ’ä»¶è€Œå‡†å¤‡çš„ï¼Œç›®å‰æœªå®Œå–„

- æ•°æ®åº“è®¾ç½®

  ä½ å¯ä»¥é€‰æ‹©ä¸åŒçš„æ•°æ®åº“è¿æ¥ç±»å‹ï¼Œæ”¯æŒæœ¬åœ°SQliteã€postgreSQLã€mysql

  ä»¥[Neonå…è´¹æ•°æ®åº“](https://neon.com/)ä¸ºä¾‹è¿›å…¥ç½‘ç«™é¢æ¿ï¼Œç‚¹å‡»Connect to your databaseï¼ŒæŸ¥çœ‹é“¾æ¥ä¿¡æ¯

  æ¯”å¦‚ï¼š`postgresql://nedb_owner:n44g_fFkBjTxr6@ep-dark-wid-ae7n-pooler.c-2.us-est-2.aws.n.tech/neondb?sslmode=require&cha_binding=rire`
  ä¸»æœºåœ°å€-ä¸º@åçš„ç›´åˆ°/çš„åœ°å€ï¼ˆep-dark-wid-ae7n-pooler.c-2.us-est-2.aws.n.techï¼‰

  ç«¯å£-5432

  æ•°æ®åº“å-Databaseé€‰é¡¹ä¸‹ä½ åˆ›å»ºçš„æ•°æ®åº“å

  ç”¨æˆ·å-Roleé€‰é¡¹ä¸‹æ˜¾ç¤ºçš„åŒæ—¶ä¹Ÿæ˜¯//ä¹‹å:ä¹‹å‰çš„nedb_owne

  å¯†ç -ä¸º@ç¬¦åˆä¹‹å‰çš„n44g_fFkBjTxr6

  æ³¨æ„ï¼šç‚¹å‡»æµ‹è¯•è¿æ¥éœ€è¦æœ€åä¿å­˜ï¼Œè¿ç§»æ•°æ®åº“æ˜¯å¢é‡è¿ç§»ï¼Œå¦‚æœå­—æ®µç›¸åŒä¸ä¼šè¦†ç›–ï¼Œæ•°æ®è¿‡å¤šæ—¶èŠ±è´¹æ—¶é—´ä¼šä¹…

- å†…å®¹ç®¡ç†

  å¦‚æœæ˜¯æœ¬åœ°ä¸Šä¼ çš„å›¾ç‰‡åœ¨åˆ—è¡¨é¡µé¢ç‚¹å‡»åˆ é™¤æ—¶ä¼šä¸€åŒåˆ é™¤æºæ–‡ä»¶ï¼Œé“¾æ¥å›¾ç‰‡åˆ™ä¸ä¼š

  ä½¿ç”¨æ‰¹é‡ä¸Šä¼ å‰è¯·ç¡®ä¿å·²å¼€å¯â€œå›¾ç‰‡ä¸Šä¼ â€é€‰é¡¹å¹¶é€‰æ‹©äº†æœ¬åœ°è¿˜æ˜¯äº‘ç«¯å­˜å‚¨

![1754122928815](https://s2.loli.net/2025/08/02/md7fpJsbanRZGP1.png)

## æ›´æ–°

- å¢åŠ å¤šå¹³å°æ•°æ®åº“è¿æ¥åŠä¸€é”®è¿ç§»

![1754070550620](https://s2.loli.net/2025/08/02/U3nYiH7h8aGS6bE.png)

- å¢åŠ ç”¨æˆ·tokenè®¾ç½®ï¼Œç›®å‰è®¤è¯æ–¹å¼ï¼šJWT token+API token

![1754073880268](https://s2.loli.net/2025/08/02/5V7cSFgkRMzyBfv.png)

- å¢åŠ æ‰¹é‡ä¸Šä¼ æ¡ˆä¾‹è„šæœ¬
- ä¼˜åŒ–æ‰‹æœºç«¯æ¸²æŸ“é€Ÿåº¦åŠå¸ƒå±€
- ä¼˜åŒ–é¦–é¡µç¼“å­˜é€»è¾‘ï¼Œæµè§ˆå™¨é»˜è®¤24å°æ—¶å†…ç¼“å­˜
- æ·»åŠ è½½å…¥åŠ¨ç”»åŠæç¤ºå¼¹çª—
- å¢åŠ æœ¬åœ°ä¸Šä¼ å’Œå¤‡ä»½åŠŸèƒ½
- å¢åŠ å‹ç¼©è½¬æ¢å›¾ç‰‡çš„åŠŸèƒ½é€‰é¡¹

------

## åå°é¢„è§ˆ

![1754126989821](https://s2.loli.net/2025/08/02/9Zz4ekyiqlYJFRD.png)

![1754127006714](https://s2.loli.net/2025/08/02/sWHKwyJu7kVqI5A.png)

è§†é¢‘ä¸Šä¼ è‡ªåŠ¨è¯†åˆ«

![image-20250808233729877](https://s2.loli.net/2025/08/08/yiJht7jOnLE6KVb.png)

ç‚¹å‡»å›¾ç‰‡æŸ¥çœ‹

![1754544187757](https://s2.loli.net/2025/08/08/Fgix4YusQ8hRKOL.png)

è§†é¢‘æ’­æ”¾

![1754543470663](https://s2.loli.net/2025/08/08/qgHzLv9XBejmFas.png)

## 

## ğŸ”¨ æ„å»ºè¯´æ˜

### æ¡Œé¢åº”ç”¨æ„å»º

æœ¬é¡¹ç›®æ”¯æŒæ„å»ºä¸ºæ¡Œé¢åº”ç”¨ç¨‹åºï¼ŒåŸºäº Tauri æ¡†æ¶å¼€å‘ã€‚

#### ç¯å¢ƒè¦æ±‚

**é€šç”¨è¦æ±‚ï¼š**

- Node.js 16+ 
- npm æˆ– yarn
- Rust 1.70+

**Windows æ„å»ºè¦æ±‚ï¼š**

- Windows 10/11
- Microsoft C++ Build Tools æˆ– Visual Studio 2019/2022
- Windows SDK

**macOS æ„å»ºè¦æ±‚ï¼š**

- macOS 10.15+
- Xcode Command Line Tools

**Linux æ„å»ºè¦æ±‚ï¼š**

- Ubuntu 18.04+ / Debian 10+ / Fedora 32+ ç­‰
- ç³»ç»Ÿå¼€å‘å·¥å…·åŒ…

#### æ„å»ºæ­¥éª¤

1. **å®‰è£…ä¾èµ–**

   ```bash
   # è¿›å…¥å‰ç«¯ç›®å½•
   cd web
   
   # å®‰è£… Node.js ä¾èµ–
   npm install
   
   # å®‰è£… Tauri CLI
   npm install -g @tauri-apps/cli
   ```

2. **å¼€å‘æ¨¡å¼è¿è¡Œ**

   ```bash
   # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
   npm run tauri dev
   ```

3. **ç”Ÿäº§æ„å»º**

   ```bash
   # æ„å»ºæ¡Œé¢åº”ç”¨
   npm run tauri build
   ```

#### Windows å¹³å°æ„å»º

**ç¯å¢ƒé…ç½®ï¼š**

1. **å®‰è£… Rust**

   ```powershell
   # ä¸‹è½½å¹¶å®‰è£… Rust
   # è®¿é—® https://rustup.rs/ ä¸‹è½½å®‰è£…ç¨‹åº
   # æˆ–ä½¿ç”¨ winget
   winget install Rustlang.Rustup
   ```

2. **å®‰è£… Microsoft C++ Build Tools**

   ```powershell
   # ä½¿ç”¨ winget å®‰è£…
   winget install Microsoft.VisualStudio.2022.BuildTools
   
   # æˆ–ä¸‹è½½ Visual Studio Installer
   # é€‰æ‹© "C++ build tools" å·¥ä½œè´Ÿè½½
   ```

3. **å®‰è£… Windows SDK**

   ```powershell
   # é€šè¿‡ Visual Studio Installer å®‰è£…
   # æˆ–ä½¿ç”¨ winget
   winget install Microsoft.WindowsSDK
   ```

**æ„å»ºå‘½ä»¤ï¼š**

```powershell
# è¿›å…¥é¡¹ç›®ç›®å½•
cd web

# å®‰è£…ä¾èµ–
npm install

# æ„å»º Windows åº”ç”¨
npm run tauri build

# æ„å»ºç‰¹å®šç›®æ ‡ï¼ˆå¯é€‰ï¼‰
npm run tauri build -- --target x86_64-pc-windows-msvc
```

**è¾“å‡ºæ–‡ä»¶ä½ç½®ï¼š**

- å¯æ‰§è¡Œæ–‡ä»¶ï¼š`web/src-tauri/target/release/memory-app.exe`
- å®‰è£…åŒ…ï¼š`web/src-tauri/target/release/bundle/msi/Memory-ä¸è´Ÿæ—¶å…‰ç›¸å†Œç¨‹åº_1.0.0_x64_en-US.msi`
- ä¾¿æºç‰ˆï¼š`web/src-tauri/target/release/bundle/nsis/Memory-ä¸è´Ÿæ—¶å…‰ç›¸å†Œç¨‹åº_1.0.0_x64-setup.exe`

#### macOS å¹³å°æ„å»º

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd web

# å®‰è£…ä¾èµ–
npm install

# æ„å»º macOS åº”ç”¨
npm run tauri build

# æ„å»ºç‰¹å®šæ¶æ„ï¼ˆå¯é€‰ï¼‰
npm run tauri build -- --target aarch64-apple-darwin  # Apple Silicon
npm run tauri build -- --target x86_64-apple-darwin   # Intel Mac
```

**è¾“å‡ºæ–‡ä»¶ä½ç½®ï¼š**

- åº”ç”¨åŒ…ï¼š`web/src-tauri/target/release/bundle/macos/Memory-ä¸è´Ÿæ—¶å…‰ç›¸å†Œç¨‹åº.app`
- DMG å®‰è£…åŒ…ï¼š`web/src-tauri/target/release/bundle/dmg/Memory-ä¸è´Ÿæ—¶å…‰ç›¸å†Œç¨‹åº_1.0.0_aarch64.dmg`

#### Linux å¹³å°æ„å»º

```bash
# å®‰è£…ç³»ç»Ÿä¾èµ–ï¼ˆUbuntu/Debianï¼‰
sudo apt update
sudo apt install -y libwebkit2gtk-4.0-dev build-essential curl wget libssl-dev libgtk-3-dev libayatana-appindicator3-dev librsvg2-dev

# å®‰è£…ç³»ç»Ÿä¾èµ–ï¼ˆFedoraï¼‰
sudo dnf install webkit2gtk3-devel openssl-devel curl wget libappindicator-gtk3-devel librsvg2-devel

# è¿›å…¥é¡¹ç›®ç›®å½•
cd web

# å®‰è£…ä¾èµ–
npm install

# æ„å»º Linux åº”ç”¨
npm run tauri build
```

**è¾“å‡ºæ–‡ä»¶ä½ç½®ï¼š**

- å¯æ‰§è¡Œæ–‡ä»¶ï¼š`web/src-tauri/target/release/memory-app`
- AppImageï¼š`web/src-tauri/target/release/bundle/appimage/memory-app_1.0.0_amd64.AppImage`
- DEB åŒ…ï¼š`web/src-tauri/target/release/bundle/deb/memory-app_1.0.0_amd64.deb`

#### è·¨å¹³å°æ„å»º

å¦‚éœ€åœ¨ä¸€ä¸ªå¹³å°ä¸Šæ„å»ºå¤šä¸ªå¹³å°çš„åº”ç”¨ï¼Œå¯ä»¥ä½¿ç”¨ GitHub Actions æˆ–å…¶ä»– CI/CD æœåŠ¡ã€‚

#### ğŸš€ GitHub Actions è‡ªåŠ¨æ„å»º

æœ¬é¡¹ç›®å·²é…ç½® GitHub Actions å·¥ä½œæµï¼Œæ”¯æŒè‡ªåŠ¨æ„å»ºå¤šå¹³å°æ¡Œé¢åº”ç”¨ï¼š

**å·¥ä½œæµæ–‡ä»¶ï¼š**
- `.github/workflows/build-windows.yml` - ä¸“é—¨æ„å»º Windows å¹³å°
- `.github/workflows/build-multiplatform.yml` - æ„å»ºæ‰€æœ‰å¹³å°ï¼ˆWindowsã€macOSã€Linuxï¼‰

**è§¦å‘æ–¹å¼ï¼š**
```bash
# 1. æ¨é€ä»£ç è‡ªåŠ¨æ„å»º
git push origin main

# 2. åˆ›å»ºæ ‡ç­¾è‡ªåŠ¨å‘å¸ƒ
git tag v1.0.0
git push origin v1.0.0

# 3. æ‰‹åŠ¨è§¦å‘ï¼ˆåœ¨ GitHub Actions é¡µé¢ï¼‰
```

**æ„å»ºäº§ç‰©ï¼š**
- **Windows**: MSI å®‰è£…åŒ…ã€NSIS ä¾¿æºç‰ˆã€å¯æ‰§è¡Œæ–‡ä»¶
- **macOS**: DMG å®‰è£…åŒ…ã€.app åº”ç”¨åŒ…ï¼ˆUniversal Binaryï¼‰
- **Linux**: AppImageã€DEB åŒ…ã€å¯æ‰§è¡Œæ–‡ä»¶

**é…ç½®è¦æ±‚ï¼š**

åœ¨ GitHub ä»“åº“è®¾ç½®ä¸­æ·»åŠ ä»¥ä¸‹ Secretsï¼ˆå¯é€‰ï¼‰ï¼š
- `TAURI_PRIVATE_KEY`: Tauri åº”ç”¨ç­¾åç§é’¥
- `TAURI_KEY_PASSWORD`: ç§é’¥å¯†ç 

**ä½¿ç”¨æ–¹æ³•ï¼š**
1. Fork æœ¬ä»“åº“åˆ°ä½ çš„ GitHub è´¦æˆ·
2. æ¨é€ä»£ç æˆ–åˆ›å»ºæ ‡ç­¾
3. åœ¨ Actions é¡µé¢æŸ¥çœ‹æ„å»ºè¿›åº¦
4. ä» Artifacts æˆ– Releases ä¸‹è½½æ„å»ºäº§ç‰©

è¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹ï¼š[GitHub Actions æ„å»ºæŒ‡å—](.github/workflows/README.md)

**æ‰‹åŠ¨æ„å»ºç¤ºä¾‹ï¼š**
```yaml
# .github/workflows/build.yml ç¤ºä¾‹
name: Build Desktop App

on:
  push:
    tags: ['v*']

jobs:
  build:
    strategy:
      matrix:
        platform: [macos-latest, ubuntu-20.04, windows-latest]
    
    runs-on: ${{ matrix.platform }}
    
    steps:
      - uses: actions/checkout@v4
      
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 18
          
      - name: Install Rust
        uses: dtolnay/rust-toolchain@stable
        
      - name: Install dependencies (Ubuntu)
        if: matrix.platform == 'ubuntu-20.04'
        run: |
          sudo apt update
          sudo apt install -y libwebkit2gtk-4.0-dev build-essential curl wget libssl-dev libgtk-3-dev libayatana-appindicator3-dev librsvg2-dev
          
      - name: Install frontend dependencies
        run: |
          cd web
          npm install
          
      - name: Build Tauri app
        run: |
          cd web
          npm run tauri build
```

#### æ„å»ºé…ç½®

æ„å»ºé…ç½®æ–‡ä»¶ä½äº `web/src-tauri/tauri.conf.json`ï¼Œå¯ä»¥è‡ªå®šä¹‰ï¼š

- åº”ç”¨åç§°å’Œç‰ˆæœ¬
- å›¾æ ‡å’Œèµ„æº
- çª—å£è®¾ç½®
- æ„å»ºç›®æ ‡
- å®‰è£…åŒ…ç±»å‹

#### æ•…éšœæ’é™¤

**å¸¸è§é—®é¢˜ï¼š**

1. **Rust ç¼–è¯‘é”™è¯¯**

   ```bash
   # æ›´æ–° Rust å·¥å…·é“¾
   rustup update
   
   # æ¸…ç†æ„å»ºç¼“å­˜
   cd web/src-tauri
   cargo clean
   ```

2. **Windows æ„å»ºå¤±è´¥**

   - ç¡®ä¿å®‰è£…äº†æ­£ç¡®ç‰ˆæœ¬çš„ Visual Studio Build Tools
   - æ£€æŸ¥ Windows SDK æ˜¯å¦æ­£ç¡®å®‰è£…
   - å°è¯•ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œå‘½ä»¤

3. **ä¾èµ–å®‰è£…å¤±è´¥**

   ```bash
   # æ¸…ç† npm ç¼“å­˜
   npm cache clean --force
   
   # åˆ é™¤ node_modules é‡æ–°å®‰è£…
   rm -rf node_modules package-lock.json
   npm install
   ```

## [API ä½¿ç”¨è¯´æ˜](./API_DOCUMENTATION.md)

è¯·è®¿é—®æŸ¥çœ‹API_DOCUMENTATION.mdæ–‡ä»¶ï¼Œæ¯”è¾ƒå¤šï¼Œæ˜¯ä¸ºæœªæ¥çš„æ’ä»¶å’Œæ‰©å±•è€Œå‡†å¤‡çš„

## å…¶å®ƒ

[Docker ç¯å¢ƒä¸‹å¤–éƒ¨æ•°æ®åº“è¿æ¥é…ç½®æŒ‡å—](https://github.com/rcy1314/Memory/blob/main/DOCKER_DATABASE_SETUP.md)

äºŒæ¬¡å¼€å‘æ—¶è¯·æ³¨æ„è¯¥é¡¹ç›®ä½¿ç”¨v-model:valueè¯­æ³•ç¼–å†™

è¿è¡Œdockeræ—¶webç›®å½•ä¸‹çš„env.productionç«¯å£å¿…é¡»å’Œdocker-compose.ymlä¸‹çš„ç«¯å£ä¸€è‡´

## To do

- [ ] å®Œå–„api-tokenæœºåˆ¶
- [ ] å¢åŠ ç»„ä»¶æ•ˆæœ
