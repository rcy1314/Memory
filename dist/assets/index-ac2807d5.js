var b=(V,g,_)=>new Promise((n,d)=>{var f=m=>{try{e(_.next(m))}catch(r){d(r)}},p=m=>{try{e(_.throw(m))}catch(r){d(r)}},e=m=>m.done?n(m.value):Promise.resolve(m.value).then(f,p);e((_=_.apply(V,g)).next())});import{a0 as $,dO as N,a4 as y,r as h,o as U,ay as c,P as x,Q as z,R as s,Z as F,$ as i,U as o,aH as k,X as B,Y as C}from"./index-be94632c.js";import{_ as I,a as u,N as O}from"./CommonPage-7e5436b1.js";import{N as R}from"./InputNumber-99faf15f.js";import{N as v}from"./Input-147bc994.js";import{a as D}from"./Select-9a1b043a.js";import{N as w}from"./Switch-efec31f2.js";import"./format-length-c9d165c6.js";import"./use-locale-5356ed31.js";import"./AppPage-98713723.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Add-28a2437a.js";import"./Tag-ec2fced6.js";import"./Popover-77560cbc.js";const M={class:"m-30 flex items-center"},K={__name:"index",setup(V){const{t:g}=$(),_=N(),n=y(),d=h(!1),f=h([]),p=h(null),e=h({page_size:"",thumbnail_suffix:"",detail_suffix:"",order_option:"",thumbnail_show_location:!1,detail_show_location:!1,thumbnail_show_time:!1,thumbnail_time_format:"",detail_show_time:!1,detail_time_format:""});function m(){e.value={page_size:n.contentSetting.page_size||"",thumbnail_suffix:n.contentSetting.thumbnail_suffix||"",detail_suffix:n.contentSetting.detail_suffix||"",order_option:n.contentSetting.order_option||"",thumbnail_show_location:n.contentSetting.thumbnail_show_location||!1,detail_show_location:n.contentSetting.detail_show_location||!1,thumbnail_show_time:n.contentSetting.thumbnail_show_time||!1,thumbnail_time_format:n.contentSetting.thumbnail_time_format||"",detail_show_time:n.contentSetting.detail_show_time||!1,detail_time_format:n.contentSetting.detail_time_format||""}}U(()=>b(this,null,function*(){yield n.getContentSetting(),m();const l=yield c.getOrderOptionVisitor();l.code==200&&(f.value=l.data.map(t=>JSON.parse(t)))}));function r(){return b(this,null,function*(){var l;d.value=!0,(l=p.value)==null||l.validate(t=>b(this,null,function*(){if(t){d.value=!1;return}var a=n.totalSetting;a.content=e.value,yield c.updateSetting(a).then(()=>{n.setContentSetting(e.value),d.value=!1,_.success(g("common.text.save_success"))}).catch(()=>{d.value=!1})}))})}const S={};return(l,t)=>(x(),z(I,{title:l.$t("views.setting.label_content_setting")},{default:s(()=>[F("div",M,[i(o(O),{ref_key:"infoFormRef",ref:p,"label-placement":"top","label-align":"left","label-width":"100",model:e.value,rules:S,class:"w-500"},{default:s(()=>[i(o(u),{label:l.$t("views.setting.label_page_size"),path:"page_size"},{default:s(()=>[i(o(R),{clearable:"",precision:0,placeholder:l.$t("views.setting.placeholder_page_size"),modelValue:e.value.page_size,"onUpdate:modelValue":t[0]||(t[0]=a=>e.value.page_size=a)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),i(o(u),{label:l.$t("views.setting.label_thumbnail_suffix"),path:"thumbnail_suffix"},{default:s(()=>[i(o(v),{modelValue:e.value.thumbnail_suffix,"onUpdate:modelValue":t[1]||(t[1]=a=>e.value.thumbnail_suffix=a),type:"text",placeholder:l.$t("views.setting.placeholder_thumbnail_suffix"),clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),i(o(u),{label:l.$t("views.setting.label_detail_suffix"),path:"detail_suffix"},{default:s(()=>[i(o(v),{modelValue:e.value.detail_suffix,"onUpdate:modelValue":t[2]||(t[2]=a=>e.value.detail_suffix=a),type:"text",placeholder:l.$t("views.setting.placeholder_detail_suffix"),clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),i(o(u),{label:l.$t("views.setting.label_order_option"),path:"order_option"},{default:s(()=>[i(o(D),{modelValue:e.value.order_option,"onUpdate:modelValue":t[3]||(t[3]=a=>e.value.order_option=a),options:f.value},null,8,["modelValue","options"])]),_:1},8,["label"]),i(o(u),{label:l.$t("views.setting.label_thumbnail_show_location"),path:"thumbnail_show_location"},{default:s(()=>[i(o(w),{modelValue:e.value.thumbnail_show_location,"onUpdate:modelValue":t[4]||(t[4]=a=>e.value.thumbnail_show_location=a)},null,8,["modelValue"])]),_:1},8,["label"]),i(o(u),{label:l.$t("views.setting.label_detail_show_location"),path:"detail_show_location"},{default:s(()=>[i(o(w),{modelValue:e.value.detail_show_location,"onUpdate:modelValue":t[5]||(t[5]=a=>e.value.detail_show_location=a)},null,8,["modelValue"])]),_:1},8,["label"]),i(o(u),{label:l.$t("views.setting.label_thumbnail_show_time"),path:"thumbnail_show_time"},{default:s(()=>[i(o(w),{modelValue:e.value.thumbnail_show_time,"onUpdate:modelValue":t[6]||(t[6]=a=>e.value.thumbnail_show_time=a)},null,8,["modelValue"])]),_:1},8,["label"]),i(o(u),{label:l.$t("views.setting.label_thumbnail_time_format"),path:"thumbnail_time_format"},{default:s(()=>[i(o(v),{modelValue:e.value.thumbnail_time_format,"onUpdate:modelValue":t[7]||(t[7]=a=>e.value.thumbnail_time_format=a),type:"text",disabled:!e.value.thumbnail_show_time,placeholder:l.$t("views.setting.placeholder_thumbnail_time_format"),clearable:""},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"]),i(o(u),{label:l.$t("views.setting.label_detail_show_time"),path:"detail_show_time"},{default:s(()=>[i(o(w),{modelValue:e.value.detail_show_time,"onUpdate:modelValue":t[8]||(t[8]=a=>e.value.detail_show_time=a)},null,8,["modelValue"])]),_:1},8,["label"]),i(o(u),{label:l.$t("views.setting.label_detail_time_format"),path:"detail_time_format"},{default:s(()=>[i(o(v),{modelValue:e.value.detail_time_format,"onUpdate:modelValue":t[9]||(t[9]=a=>e.value.detail_time_format=a),type:"text",disabled:!e.value.detail_show_time,placeholder:l.$t("views.setting.placeholder_detail_time_format"),clearable:""},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"]),i(o(k),{type:"primary",loading:d.value,onClick:r},{default:s(()=>[B(C(l.$t("common.buttons.save")),1)]),_:1},8,["loading"])]),_:1},8,["model"])])]),_:1},8,["title"]))}};export{K as default};
