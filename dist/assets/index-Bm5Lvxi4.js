var Oe=Object.defineProperty;var fe=Object.getOwnPropertySymbols;var Pe=Object.prototype.hasOwnProperty,Ae=Object.prototype.propertyIsEnumerable;var ce=(i,r,u)=>r in i?Oe(i,r,{enumerable:!0,configurable:!0,writable:!0,value:u}):i[r]=u,oe=(i,r)=>{for(var u in r||(r={}))Pe.call(r,u)&&ce(i,u,r[u]);if(fe)for(var u of fe(r))Ae.call(r,u)&&ce(i,u,r[u]);return i};var A=(i,r,u)=>new Promise((n,d)=>{var c=g=>{try{v(u.next(g))}catch(h){d(h)}},p=g=>{try{v(u.throw(g))}catch(h){d(h)}},v=g=>g.done?n(g.value):Promise.resolve(g.value).then(c,p);v((u=u.apply(i,r)).next())});import{d6 as Ve,j as E,r as S,aj as Le,a9 as Ne,f as Xe,d as Ce,h as Y,n as He,bI as Qe,d7 as Q,L as ve,V as qe,u as We,E as ee,o as Re,p as Je,t as pe,m as Ye,aQ as Ze,aV as me,a1 as Ke,d8 as et,a5 as tt,a6 as ne,T as z,a0 as s,R as f,af as te,P as ge,_ as N,Z as re,W as o,X as R,aH as D,F as lt,U as at,aI as he,d4 as st,az as W,aB as it,Q as I}from"./index-ON-SflwH.js";import{_ as $e}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as F}from"./TheIcon-Mohbq-MB.js";import{N as ye,i as ot}from"./full.esm-BgQ19Jr2.js";import{a as nt,N as rt}from"./Upload-CpsjnSDw.js";import{g as ut,N as dt}from"./Space-BWY59FNQ.js";import{b as ft}from"./Popover-DLxopjSP.js";import{N as ct}from"./Popconfirm-JQzYnrhl.js";import{N as _e}from"./Image-1TDPnt6y.js";import{N as be,a as B}from"./FormItem-CFjxQbHB.js";import{N as vt}from"./TreeSelect-BOfnDCPI.js";import{N as we}from"./Switch-D3pB72jH.js";import{N as le}from"./Input-Ck59uIzx.js";import{N as Se}from"./DatePicker-D6CyvbCr.js";import"./icon-oAdvG0qp.js";import"./Icon-BJkIY_JM.js";import"./format-length-B-p6aW7q.js";import"./utils-C8CieVbz.js";import"./Tag-U0zSNQTP.js";import"./use-locale-gdUNdwpT.js";import"./Tooltip-Bg3keV3f.js";import"./Add-CAjrcp6O.js";import"./use-keyboard-DJNqtv65.js";function pt(i){if(typeof i=="number")return{"":i.toString()};const r={};return i.split(/ +/).forEach(u=>{if(u==="")return;const[n,d]=u.split(":");d===void 0?r[""]=n:r[n]=d}),r}function X(i,r){var u;if(i==null)return;const n=pt(i);if(r===void 0)return n[""];if(typeof r=="string")return(u=n[r])!==null&&u!==void 0?u:n[""];if(Array.isArray(r)){for(let d=r.length-1;d>=0;--d){const c=r[d];if(c in n)return n[c]}return n[""]}else{let d,c=-1;return Object.keys(n).forEach(p=>{const v=Number(p);!Number.isNaN(v)&&r>=v&&v>=c&&(c=v,d=n[p])}),d}}const mt={xs:0,s:640,m:1024,l:1280,xl:1536,"2xl":1920};function gt(i){return`(min-width: ${i}px)`}const J={};function ht(i=mt){if(!Ve)return E(()=>[]);if(typeof window.matchMedia!="function")return E(()=>[]);const r=S({}),u=Object.keys(i),n=(d,c)=>{d.matches?r.value[c]=!0:r.value[c]=!1};return u.forEach(d=>{const c=i[d];let p,v;J[c]===void 0?(p=window.matchMedia(gt(c)),p.addEventListener?p.addEventListener("change",g=>{v.forEach(h=>{h(g,d)})}):p.addListener&&p.addListener(g=>{v.forEach(h=>{h(g,d)})}),v=new Set,J[c]={mql:p,cbs:v}):(p=J[c].mql,v=J[c].cbs),v.add(n),p.matches&&v.forEach(g=>{g(p,d)})}),Le(()=>{u.forEach(d=>{const{cbs:c}=J[i[d]];c.has(n)&&c.delete(n)})}),E(()=>{const{value:d}=r;return u.filter(c=>d[c])})}function yt(i){var r;const u=(r=i.dirs)===null||r===void 0?void 0:r.find(({dir:n})=>n===Ne);return!!(u&&u.value===!1)}const xe=1,ke=Xe("n-grid"),Ie=1,_t={span:{type:[Number,String],default:Ie},offset:{type:[Number,String],default:0},suffix:Boolean,privateOffset:Number,privateSpan:Number,privateColStart:Number,privateShow:{type:Boolean,default:!0}},H=Ce({__GRID_ITEM__:!0,name:"GridItem",alias:["Gi"],props:_t,setup(){const{isSsrRef:i,xGapRef:r,itemStyleRef:u,overflowRef:n,layoutShiftDisabledRef:d}=He(ke),c=Qe();return{overflow:n,itemStyle:u,layoutShiftDisabled:d,mergedXGap:E(()=>Q(r.value||0)),deriveStyle:()=>{i.value;const{privateSpan:p=Ie,privateShow:v=!0,privateColStart:g=void 0,privateOffset:h=0}=c.vnode.props,{value:y}=r,j=Q(y||0);return{display:v?"":"none",gridColumn:`${g!=null?g:`span ${p}`} / span ${p}`,marginLeft:h?`calc((100% - (${p} - 1) * ${j}) / ${p} * ${h} + ${j} * ${h})`:""}}}},render(){var i,r;if(this.layoutShiftDisabled){const{span:u,offset:n,mergedXGap:d}=this;return Y("div",{style:{gridColumn:`span ${u} / span ${u}`,marginLeft:n?`calc((100% - (${u} - 1) * ${d}) / ${u} * ${n} + ${d} * ${n})`:""}},this.$slots)}return Y("div",{style:[this.itemStyle,this.deriveStyle()]},(r=(i=this.$slots).default)===null||r===void 0?void 0:r.call(i,{overflow:this.overflow}))}}),bt={xs:0,s:640,m:1024,l:1280,xl:1536,xxl:1920},Ee=24,ue="__ssr__",wt={layoutShiftDisabled:Boolean,responsive:{type:[String,Boolean],default:"self"},cols:{type:[Number,String],default:Ee},itemResponsive:Boolean,collapsed:Boolean,collapsedRows:{type:Number,default:1},itemStyle:[Object,String],xGap:{type:[Number,String],default:0},yGap:{type:[Number,String],default:0}},St=Ce({name:"Grid",inheritAttrs:!1,props:wt,setup(i){const{mergedClsPrefixRef:r,mergedBreakpointsRef:u}=We(i),n=/^\d+$/,d=S(void 0),c=ht((u==null?void 0:u.value)||bt),p=ee(()=>!!(i.itemResponsive||!n.test(i.cols.toString())||!n.test(i.xGap.toString())||!n.test(i.yGap.toString()))),v=E(()=>{if(p.value)return i.responsive==="self"?d.value:c.value}),g=ee(()=>{var _;return(_=Number(X(i.cols.toString(),v.value)))!==null&&_!==void 0?_:Ee}),h=ee(()=>X(i.xGap.toString(),v.value)),y=ee(()=>X(i.yGap.toString(),v.value)),j=_=>{d.value=_.contentRect.width},C=_=>{ft(j,_)},M=S(!1),$=E(()=>{if(i.responsive==="self")return C}),b=S(!1),m=S();return Re(()=>{const{value:_}=m;_&&_.hasAttribute(ue)&&(_.removeAttribute(ue),b.value=!0)}),Je(ke,{layoutShiftDisabledRef:pe(i,"layoutShiftDisabled"),isSsrRef:b,itemStyleRef:pe(i,"itemStyle"),xGapRef:h,overflowRef:M}),{isSsr:!Ye,contentEl:m,mergedClsPrefix:r,style:E(()=>i.layoutShiftDisabled?{width:"100%",display:"grid",gridTemplateColumns:`repeat(${i.cols}, minmax(0, 1fr))`,columnGap:Q(i.xGap),rowGap:Q(i.yGap)}:{width:"100%",display:"grid",gridTemplateColumns:`repeat(${g.value}, minmax(0, 1fr))`,columnGap:Q(h.value),rowGap:Q(y.value)}),isResponsive:p,responsiveQuery:v,responsiveCols:g,handleResize:$,overflow:M}},render(){if(this.layoutShiftDisabled)return Y("div",ve({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style},this.$attrs),this.$slots);const i=()=>{var r,u,n,d,c,p,v;this.overflow=!1;const g=Ze(ut(this)),h=[],{collapsed:y,collapsedRows:j,responsiveCols:C,responsiveQuery:M}=this;g.forEach(a=>{var O,G,k,T,V;if(((O=a==null?void 0:a.type)===null||O===void 0?void 0:O.__GRID_ITEM__)!==!0)return;if(yt(a)){const P=me(a);P.props?P.props.privateShow=!1:P.props={privateShow:!1},h.push({child:P,rawChildSpan:0});return}a.dirs=((G=a.dirs)===null||G===void 0?void 0:G.filter(({dir:P})=>P!==Ne))||null,((k=a.dirs)===null||k===void 0?void 0:k.length)===0&&(a.dirs=null);const q=me(a),Z=Number((V=X((T=q.props)===null||T===void 0?void 0:T.span,M))!==null&&V!==void 0?V:xe);Z!==0&&h.push({child:q,rawChildSpan:Z})});let $=0;const b=(r=h[h.length-1])===null||r===void 0?void 0:r.child;if(b!=null&&b.props){const a=(u=b.props)===null||u===void 0?void 0:u.suffix;a!==void 0&&a!==!1&&($=Number((d=X((n=b.props)===null||n===void 0?void 0:n.span,M))!==null&&d!==void 0?d:xe),b.props.privateSpan=$,b.props.privateColStart=C+1-$,b.props.privateShow=(c=b.props.privateShow)!==null&&c!==void 0?c:!0)}let m=0,_=!1;for(const{child:a,rawChildSpan:O}of h){if(_&&(this.overflow=!0),!_){const G=Number((v=X((p=a.props)===null||p===void 0?void 0:p.offset,M))!==null&&v!==void 0?v:0),k=Math.min(O+G,C);if(a.props?(a.props.privateSpan=k,a.props.privateOffset=G):a.props={privateSpan:k,privateOffset:G},y){const T=m%C;k+T>C&&(m+=C-T),k+m+$>j*C?_=!0:m+=k}}_&&(a.props?a.props.privateShow!==!0&&(a.props.privateShow=!1):a.props={privateShow:!1})}return Y("div",ve({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style,[ue]:this.isSsr||void 0},this.$attrs),h.map(({child:a})=>a))};return this.isResponsive&&this.responsive==="self"?Y(qe,{onResize:this.handleResize},{default:i}):i()}}),xt={class:"min-h-screen max-h-screen overflow-y-auto overflow-x-hidden"},Nt={key:0,class:"mb-6"},Ct={class:"flex justify-between items-center mb-4"},Rt={class:"text-5xl font-semibold text-gray-800 dark:text-gray-200"},$t={class:"image-grid"},kt=["onMouseenter"],It={key:0,class:"image-actions"},Et={key:1,class:"flex gap-1"},Gt={key:1,class:"absolute top-1 left-1 bg-red-500 text-white text-sm px-1 py-0.5 rounded"},Dt={style:{"margin-bottom":"12px"}},Bt={class:"text-lg text-gray-500"},jt={key:2,class:"text-center p-4 bg-gray-800 text-gray-200 rounded mb-4"},Mt={class:"flex justify-end mt-4"},Ut={class:"flex justify-end gap-3 mt-6"},zt={key:0,class:"space-y-4"},Tt={class:"flex justify-center mb-4"},Ft={class:"flex justify-end gap-3"},Ot={__name:"BatchUpload",emits:["refresh","close"],setup(i,{emit:r}){const{t:u}=Ke(),n=et(),d=tt(),c=E(()=>{var t;return((t=d.storageSetting)==null?void 0:t.storage_type)==="local"}),p=E(()=>{var t;return(t=d.storageSetting)==null?void 0:t.enable_storage}),v=E(()=>{var t,e;return ne((t=d.storageSetting)==null?void 0:t.timeout_time)?(e=d.storageSetting)==null?void 0:e.timeout_time:"180"}),g=E(()=>{var t,e;return ne((t=d.contentSetting)==null?void 0:t.thumbnail_suffix)?(e=d.contentSetting)==null?void 0:e.thumbnail_suffix:""}),h=E(()=>{var t,e;return ne((t=d.contentSetting)==null?void 0:t.detail_suffix)?(e=d.contentSetting)==null?void 0:e.detail_suffix:""}),y=S([]),j=S(!1),C=S({}),M=S(-1),$=S({}),b=S(!1),m=S(null),_=S(-1),a=S({category_ids:[],is_hidden:!1,title:"",desc:"",location:"",time:null}),O=S([]),G=S([]);function k(){return A(this,null,function*(){try{const t=yield W.getCategories();t.code===200&&(O.value=t.data)}catch(t){console.error("获取分类失败:",t)}})}function T(){return A(this,null,function*(){try{const t=yield W.getBlogLocations();t.code===200&&(G.value=t.data.map(e=>({label:e[0],value:e[0]})))}catch(t){console.error("获取地点失败:",t)}})}const V=({file:t,data:e,headers:l,action:w,onFinish:x,onError:ae,onProgress:se})=>{const ie=new FormData;e&&Object.keys(e).forEach(U=>{ie.append(U,e[U])}),ie.append("file",t.file);const K=t.id;C.value[K]=0,W.uploadImage(ie,l,U=>{const L=Math.round(U.loaded*100/U.total);C.value[K]=L,se&&typeof se=="function"&&se({percent:L})},v.value).then(U=>{console.log("Upload response:",U);const L=t.name,Fe=L.substring(0,L.lastIndexOf("."))||L,de={id:Date.now()+Math.random(),image_url:U.data||U.image_url,title:Fe,desc:"",time:null,location:"",is_hidden:!1,metadata:"",file_name:t.name,file_size:t.file.size,is_local:c.value};console.log("Adding image to list:",de),y.value.push(de),$.value[y.value.length-1]=!1,console.log("Current uploadedImages:",y.value),delete C.value[K],x(),n.success(`${t.name} 上传成功`)}).catch(U=>{delete C.value[K],ae&&typeof ae=="function"&&ae(),n.error(`${t.name} 上传失败`)})},q=t=>A(this,null,function*(){const e=y.value[t];if(e.is_local)try{yield W.deleteLocalImage({image_url:e.image_url}),n.success("本地文件删除成功")}catch(l){n.error("删除本地文件失败");return}y.value.splice(t,1),n.success("图片删除成功")}),Z=t=>A(this,null,function*(){try{let e=t.image_url;e.startsWith("http")||(e=new URL(e,window.location.origin).href);const l=yield ot(e,{httpHeaders:{"Access-Control-Allow-Origin":"*"},fetch:w=>A(this,null,function*(){try{const x=yield fetch(w,{mode:"cors",credentials:"omit"});if(!x.ok)throw new Error(`HTTP ${x.status}`);return x}catch(x){throw console.warn("直接访问失败，尝试其他方式:",x),x}})});l?(t.metadata=JSON.stringify(l,null,2),l.latitude&&l.longitude&&console.log("GPS坐标:",l.latitude,l.longitude),l.DateTimeOriginal&&(t.time=it(new Date(l.DateTimeOriginal))),n.success("EXIF信息获取成功")):n.warning("该图片没有EXIF信息")}catch(e){console.error("EXIF解析错误:",e),e.message.includes("Failed to fetch")||e.message.includes("CORS")?n.warning("无法获取EXIF信息：图片跨域访问受限"):e.message.includes("HTTP")?n.warning("无法获取EXIF信息：图片访问失败"):n.warning("该图片可能没有EXIF信息或格式不支持")}}),P=()=>{y.value.forEach(t=>{a.value.category_ids&&a.value.category_ids.length>0&&(t.category_ids=[...a.value.category_ids]),a.value.is_hidden!==void 0&&(t.is_hidden=a.value.is_hidden),a.value.title&&a.value.title.trim()&&(t.title&&t.title.trim()?t.title=a.value.title+" - "+t.title:t.title=a.value.title),a.value.desc&&a.value.desc.trim()&&(t.desc=a.value.desc),a.value.location&&a.value.location.trim()&&(t.location=a.value.location),a.value.time&&(t.time=a.value.time)}),n.success("批量设置应用成功")},Ge=()=>A(this,null,function*(){if(y.value.length===0){n.error("请先上传图片");return}try{j.value=!0;let t=0,e=0;for(const l of y.value)try{const w={title:l.title||"未命名图片",desc:l.desc||"",time:l.time?new Date(l.time).toISOString():new Date().toISOString(),location:l.location||"",category_ids:l.category_ids||a.value.category_ids||[],is_hidden:l.is_hidden!==void 0?l.is_hidden:a.value.is_hidden,images:[{image_url:l.image_url,title:l.title||"未命名图片",desc:l.desc||"",location:l.location||"",is_hidden:l.is_hidden!==void 0?l.is_hidden:a.value.is_hidden,metadata:l.metadata||"",order:0,time:l.time?new Date(l.time).toISOString():new Date().toISOString()}]};(yield W.createBlog(w)).code===200?t++:e++}catch(w){console.error("保存图片失败:",w),e++}t>0?(n.success(`成功保存 ${t} 张图片${e>0?`，失败 ${e} 张`:""}`),y.value=[],a.value={category_ids:[],is_hidden:!1,title:"",desc:"",location:"",time:null},Te("refresh")):n.error("所有图片保存失败")}catch(t){n.error("批量保存失败"),console.error("批量保存错误:",t)}finally{j.value=!1}}),De=()=>A(this,null,function*(){for(let t=y.value.length-1;t>=0;t--)yield q(t)});function Be(t){return t>Date.now()}const je=(t,e)=>{m.value=oe({},t),_.value=e,b.value=!0},Me=()=>{_.value>=0&&m.value&&(y.value[_.value]=oe({},m.value),b.value=!1,m.value=null,_.value=-1,n.success("图片信息已更新"))},Ue=()=>{b.value=!1,m.value=null,_.value=-1};S(null);const ze=()=>{const t=document.createElement("input");t.type="file",t.multiple=!0,t.accept=".tif,.jpg,.jpeg,.ico,.tiff,.gif,.svg,.jfif,.webp,.png,.bmp,.jpeg,.avif",t.onchange=e=>{Array.from(e.target.files).forEach(w=>{V({file:w})})},t.click()},Te=r;return Re(()=>{k(),T()}),(t,e)=>(I(),z("div",xt,[s(o(he),{title:"批量上传",class:"mt-4"},{default:f(()=>[y.value.length>0?(I(),z("div",Nt,[N("div",Ct,[N("h3",Rt,"图片列表 ("+re(y.value.length)+")",1),s(o(dt),null,{default:f(()=>[s(o(ct),{onPositiveClick:De},{trigger:f(()=>[s(o(D),{size:"small",type:"error"},{default:f(()=>[s(F,{icon:"material-symbols:delete",size:16,class:"mr-1"}),e[14]||(e[14]=R(" 清空所有 "))]),_:1})]),default:f(()=>[e[15]||(e[15]=R(" 确定要清空所有已上传的图片吗？本地存储的文件也会被删除。 "))]),_:1})]),_:1})]),N("div",$t,[(I(!0),z(lt,null,at(y.value,(l,w)=>(I(),z("div",{key:l.id,class:"image-card",onMouseenter:x=>M.value=w,onMouseleave:e[0]||(e[0]=x=>M.value=-1)},[s(o(_e),{style:{width:"100%",height:"100%"},"object-fit":"cover",width:"100%",height:"100%",src:l.image_url+g.value,"preview-src":l.image_url+h.value,"fallback-src":"/assets/error.svg","show-toolbar-tooltip":""},null,8,["src","preview-src"]),M.value===w?(I(),z("div",It,[s(o(D),{size:"tiny",text:"",class:"image-action",onClick:x=>je(l,w)},{default:f(()=>[s(F,{icon:"material-symbols:edit-outline",size:18,class:"mr-5",color:"white"})]),_:2},1032,["onClick"]),s(o(D),{size:"tiny",text:"",class:"image-action",onClick:x=>Z(l)},{default:f(()=>[s(F,{icon:"material-symbols:info-outline",size:18,class:"mr-5",color:"white"})]),_:2},1032,["onClick"]),$.value[w]?(I(),z("div",Et,[s(o(D),{size:"tiny",type:"error",onClick:x=>{q(w),$.value[w]=!1}},{default:f(()=>e[16]||(e[16]=[R(" 确认删除 ")])),_:2},1032,["onClick"]),s(o(D),{size:"tiny",onClick:x=>$.value[w]=!1},{default:f(()=>e[17]||(e[17]=[R(" 取消 ")])),_:2},1032,["onClick"])])):(I(),ge(o(D),{key:0,size:"tiny",text:"",class:"image-action",onClick:x=>$.value[w]=!0},{default:f(()=>[s(F,{icon:"material-symbols:delete-outline",size:18,class:"mr-5",color:"white"})]),_:2},1032,["onClick"]))])):te("",!0),l.is_hidden?(I(),z("div",Gt," 隐藏 ")):te("",!0)],40,kt))),128)),N("div",{class:"image-card add-card",onClick:ze},[s(F,{icon:"material-symbols:add",size:28,class:"mr-5"})])])])):te("",!0),p.value?(I(),ge(o(rt),{key:1,multiple:"","directory-dnd":"","custom-request":V,accept:".tif,.jpg,.jpeg,.ico,.tiff,.gif,.svg,.jfif,.webp,.png,.bmp,.jpeg,.avif","show-file-list":!1,class:"mb-4"},{default:f(()=>[s(o(nt),null,{default:f(()=>[N("div",Dt,[s(F,{icon:"material-symbols:cloud-upload",size:48,color:"#409eff"})]),e[20]||(e[20]=N("div",{class:"text-2xl font-medium mb-2"},"点击或拖拽文件到此区域上传",-1)),N("div",Bt,[e[18]||(e[18]=R(" 支持单个或批量上传，支持 JPG、PNG、GIF、WebP 等格式 ")),e[19]||(e[19]=N("br",null,null,-1)),R(" 当前存储方式："+re(c.value?"本地存储":"云端存储"),1)])]),_:1})]),_:1})):(I(),z("div",jt,[s(F,{icon:"material-symbols:warning",size:24,color:"#f56c6c",class:"mb-2"}),e[21]||(e[21]=N("div",{class:"text-lg"},[R("图片上传功能未启用，请先在 "),N("strong",null,"系统管理 → 存储设置"),R(" 中开启图片上传功能")],-1))])),s(o(he),{title:"统一参数设置",size:"small",class:"mb-4"},{default:f(()=>[s(o(be),{model:a.value,"label-placement":"left","label-width":80},{default:f(()=>[s(o(St),{cols:2,"x-gap":12},{default:f(()=>[s(o(H),null,{default:f(()=>[s(o(B),{label:"分类"},{default:f(()=>[s(o(vt),{value:a.value.category_ids,"onUpdate:value":e[1]||(e[1]=l=>a.value.category_ids=l),multiple:"",checkable:"","key-field":"id","label-field":"name",options:O.value,"default-expand-all":"",placeholder:"选择分类（可选）",onClick:k},null,8,["value","options"])]),_:1})]),_:1}),s(o(H),null,{default:f(()=>[s(o(B),{label:"默认隐藏"},{default:f(()=>[s(o(we),{value:a.value.is_hidden,"onUpdate:value":e[2]||(e[2]=l=>a.value.is_hidden=l)},null,8,["value"])]),_:1})]),_:1}),s(o(H),null,{default:f(()=>[s(o(B),{label:"标题前缀"},{default:f(()=>[s(o(le),{value:a.value.title,"onUpdate:value":e[3]||(e[3]=l=>a.value.title=l),placeholder:"为所有图片添加统一标题前缀（可选）",clearable:""},null,8,["value"])]),_:1})]),_:1}),s(o(H),null,{default:f(()=>[s(o(B),{label:"描述"},{default:f(()=>[s(o(le),{value:a.value.desc,"onUpdate:value":e[4]||(e[4]=l=>a.value.desc=l),placeholder:"为所有图片添加统一描述（可选）",clearable:""},null,8,["value"])]),_:1})]),_:1}),s(o(H),null,{default:f(()=>[s(o(B),{label:"拍摄地点"},{default:f(()=>[s(o(ye),{value:a.value.location,"onUpdate:value":e[5]||(e[5]=l=>a.value.location=l),options:G.value,placeholder:"为所有图片设置统一拍摄地点（可选）",clearable:""},null,8,["value","options"])]),_:1})]),_:1}),s(o(H),null,{default:f(()=>[s(o(B),{label:"拍摄时间"},{default:f(()=>[s(o(Se),{value:a.value.time,"onUpdate:value":e[6]||(e[6]=l=>a.value.time=l),type:"datetime",placeholder:"为所有图片设置统一拍摄时间（可选）","value-format":"yyyy-MM-dd HH:mm:ss",clearable:"",class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),N("div",Mt,[s(o(D),{type:"primary",ghost:"",onClick:P,disabled:y.value.length===0},{default:f(()=>[s(F,{icon:"material-symbols:settings-applications",size:16,class:"mr-1"}),e[22]||(e[22]=R(" 应用到所有图片 "))]),_:1},8,["disabled"])])]),_:1},8,["model"])]),_:1}),N("div",Ut,[s(o(D),{size:"large",onClick:e[7]||(e[7]=l=>t.$emit("close"))},{default:f(()=>e[23]||(e[23]=[R(" 取消 ")])),_:1}),s(o(D),{type:"primary",size:"large",loading:j.value,onClick:Ge,disabled:y.value.length===0},{default:f(()=>[s(F,{icon:"material-symbols:save",size:18,class:"mr-2"}),R(" 保存 ("+re(y.value.length)+") ",1)]),_:1},8,["loading","disabled"])])]),_:1}),s(o(st),{show:b.value,"onUpdate:show":e[13]||(e[13]=l=>b.value=l),preset:"card",title:"编辑图片信息",style:{width:"600px"}},{footer:f(()=>[N("div",Ft,[s(o(D),{onClick:Ue},{default:f(()=>e[24]||(e[24]=[R("取消")])),_:1}),s(o(D),{type:"primary",onClick:Me},{default:f(()=>e[25]||(e[25]=[R("保存")])),_:1})])]),default:f(()=>[m.value?(I(),z("div",zt,[N("div",Tt,[s(o(_e),{src:m.value.image_url+g.value,"preview-src":m.value.image_url+h.value,class:"w-48 h-48 object-cover rounded-lg","show-toolbar-tooltip":"","fallback-src":"/assets/error.svg"},null,8,["src","preview-src"])]),s(o(be),{"label-placement":"left","label-width":80},{default:f(()=>[s(o(B),{label:"图片标题"},{default:f(()=>[s(o(le),{value:m.value.title,"onUpdate:value":e[8]||(e[8]=l=>m.value.title=l),placeholder:"图片标题",maxlength:"50","show-count":""},null,8,["value"])]),_:1}),s(o(B),{label:"图片描述"},{default:f(()=>[s(o(le),{value:m.value.desc,"onUpdate:value":e[9]||(e[9]=l=>m.value.desc=l),type:"textarea",placeholder:"图片描述",rows:3},null,8,["value"])]),_:1}),s(o(B),{label:"拍摄时间"},{default:f(()=>[s(o(Se),{value:m.value.time,"onUpdate:value":e[10]||(e[10]=l=>m.value.time=l),type:"datetime",placeholder:"拍摄时间","value-format":"yyyy-MM-dd HH:mm:ss","is-date-disabled":Be,class:"w-full"},null,8,["value"])]),_:1}),s(o(B),{label:"拍摄地点"},{default:f(()=>[s(o(ye),{value:m.value.location,"onUpdate:value":e[11]||(e[11]=l=>m.value.location=l),options:G.value,placeholder:"拍摄地点",clearable:"",filterable:"",onSearch:T},null,8,["value","options"])]),_:1}),s(o(B),{label:"隐藏图片"},{default:f(()=>[s(o(we),{value:m.value.is_hidden,"onUpdate:value":e[12]||(e[12]=l=>m.value.is_hidden=l)},null,8,["value"])]),_:1})]),_:1})])):te("",!0)]),_:1},8,["show"])]))}},Pt=$e(Ot,[["__scopeId","data-v-2e7bf0a0"]]),At={class:"min-h-screen"},Vt={__name:"index",setup(i){return(r,u)=>(I(),z("div",At,[s(Pt)]))}},pl=$e(Vt,[["__scopeId","data-v-c389a40b"]]);export{pl as default};
