var v=(w,_,i)=>new Promise((r,u)=>{var p=n=>{try{m(i.next(n))}catch(d){u(d)}},e=n=>{try{m(i.throw(n))}catch(d){u(d)}},m=n=>n.done?r(n.value):Promise.resolve(n.value).then(p,e);m((i=i.apply(w,_)).next())});import{a1 as h,d8 as k,a5 as y,r as f,o as S,P as $,R as c,Q as j,_ as N,a0 as s,W as o,aH as F,X as B,Z as R,az as U}from"./index-CWFJs7gC.js";import{_ as G}from"./CommonPage-D3urqxip.js";import{N as I,a as g}from"./FormItem-C8gpvBZ1.js";import{N as b}from"./Input-lGLiS13x.js";import"./AppPage-Dsgp7csD.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./format-length-B-p6aW7q.js";import"./use-locale-EYmsExNA.js";const V={class:"m-30 flex items-center"},Q={__name:"index",setup(w){const{t:_}=h(),i=k(),r=y(),u=f(!1),p=f(null),e=f({workbench_title:"",workbench_desc:"",custom_css:"",custom_js:""});function m(){Object.assign(e.value,{workbench_title:r.generalSetting.workbench_title||"",workbench_desc:r.generalSetting.workbench_desc||"",custom_css:r.generalSetting.custom_css||"",custom_js:r.generalSetting.custom_js||""})}S(()=>v(this,null,function*(){yield r.getGeneralSetting(),m()}));function n(){return v(this,null,function*(){var t;u.value=!0,(t=p.value)==null||t.validate(l=>v(this,null,function*(){if(l){u.value=!1;return}try{const a={general:e.value};yield U.updateGeneralSetting(a),r.setGeneralSetting(e.value),u.value=!1,i.success(_("common.text.save_success"))}catch(a){console.error("保存设置失败:",a),u.value=!1,i.error(_("common.text.save_failed")||"保存失败")}}))})}const d={};return(t,l)=>(j(),$(G,{title:t.$t("views.setting.label_general_setting")},{default:c(()=>[N("div",V,[s(o(I),{ref_key:"infoFormRef",ref:p,"label-placement":"top","label-align":"left","label-width":"100",model:e.value,rules:d,class:"w-500"},{default:c(()=>[s(o(g),{label:t.$t("views.setting.label_workbench_title"),path:"workbench_title"},{default:c(()=>[s(o(b),{value:e.value.workbench_title,"onUpdate:value":l[0]||(l[0]=a=>e.value.workbench_title=a),type:"text",placeholder:t.$t("views.setting.placeholder_workbench_title",{username:"{username}"})},null,8,["value","placeholder"])]),_:1},8,["label"]),s(o(g),{label:t.$t("views.setting.label_workbench_desc"),path:"workbench_desc"},{default:c(()=>[s(o(b),{value:e.value.workbench_desc,"onUpdate:value":l[1]||(l[1]=a=>e.value.workbench_desc=a),type:"text",placeholder:t.$t("views.setting.placeholder_workbench_desc",{username:"{username}"})},null,8,["value","placeholder"])]),_:1},8,["label"]),s(o(g),{label:t.$t("views.setting.label_custom_css"),path:"custom_css"},{default:c(()=>[s(o(b),{value:e.value.custom_css,"onUpdate:value":l[2]||(l[2]=a=>e.value.custom_css=a),type:"textarea",placeholder:t.$t("views.setting.placeholder_custom_css")},null,8,["value","placeholder"])]),_:1},8,["label"]),s(o(g),{label:t.$t("views.setting.label_custom_js"),path:"custom_js"},{default:c(()=>[s(o(b),{value:e.value.custom_js,"onUpdate:value":l[3]||(l[3]=a=>e.value.custom_js=a),type:"textarea",placeholder:t.$t("views.setting.placeholder_custom_js")},null,8,["value","placeholder"])]),_:1},8,["label"]),s(o(F),{type:"primary",loading:u.value,onClick:n},{default:c(()=>[B(R(t.$t("common.buttons.save")),1)]),_:1},8,["loading"])]),_:1},8,["model"])])]),_:1},8,["title"]))}};export{Q as default};
