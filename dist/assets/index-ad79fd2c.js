var _=(V,g,p)=>new Promise((o,u)=>{var f=d=>{try{b(p.next(d))}catch(v){u(v)}},e=d=>{try{b(p.throw(d))}catch(v){u(v)}},b=d=>d.done?o(d.value):Promise.resolve(d.value).then(f,e);b((p=p.apply(V,g)).next())});import{a0 as S,dO as k,a4 as x,r as c,o as N,P as U,Q as z,R as n,Z as F,$ as s,U as i,X as h,aH as B,Y as I,ay as R}from"./index-be94632c.js";import{_ as C,a as r,N as M}from"./CommonPage-7e5436b1.js";import{N as D}from"./Switch-efec31f2.js";import{N as y}from"./InputNumber-99faf15f.js";import{N as m}from"./Input-147bc994.js";import"./format-length-c9d165c6.js";import"./use-locale-5356ed31.js";import"./AppPage-98713723.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Add-28a2437a.js";const H={class:"m-30 flex items-center"},E={__name:"index",setup(V){const{t:g}=S(),p=k(),o=x(),u=c(!1),f=c(null),e=c({enable_storage:!1,max_size:"",timeout_time:"",endpoint:"",region:"",access_id:"",secret_key:"",bucket:"",path:"",prefix:"",suffix:""});function b(){e.value={enable_storage:o.storageSetting.enable_storage||!1,max_size:o.storageSetting.max_size||"",timeout_time:o.storageSetting.timeout_time||"",endpoint:o.storageSetting.endpoint||"",region:o.storageSetting.region||"",access_id:o.storageSetting.access_id||"",secret_key:o.storageSetting.secret_key||"",bucket:o.storageSetting.bucket||"",path:o.storageSetting.path||"",prefix:o.storageSetting.prefix||"",suffix:o.storageSetting.suffix||""}}N(()=>_(this,null,function*(){yield o.getStorageSetting(),b()}));function d(l){return _(this,null,function*(){var a;u.value=!0,(a=f.value)==null||a.validate(t=>_(this,null,function*(){if(t){u.value=!1;return}var w=o.totalSetting;w.storage=e.value,yield R.updateSetting(w).then(()=>{o.setStorageSetting(e.value),u.value=!1,l&&p.success(g("common.text.save_success"))}).catch(()=>{u.value=!1})}))})}const v={};function $(l){p.success(g(l?"views.setting.label_enable_storage":"views.setting.label_disable_storage")),d(!1)}return(l,a)=>(U(),z(C,{title:l.$t("views.setting.label_storage_setting")},{default:n(()=>[F("div",H,[s(i(M),{ref_key:"infoFormRef",ref:f,"label-placement":"top","label-align":"left","label-width":"100",model:e.value,rules:v,class:"w-500"},{default:n(()=>[s(i(r),{label:l.$t("views.setting.label_enable_storage"),path:"enable_storage"},{default:n(()=>[s(i(D),{modelValue:e.value.enable_storage,"onUpdate:modelValue":a[0]||(a[0]=t=>e.value.enable_storage=t),clearable:"","onUpdate:value":$},null,8,["modelValue"])]),_:1},8,["label"]),s(i(r),{label:l.$t("views.setting.label_max_size"),path:"max_size"},{default:n(()=>[s(i(y),{precision:2,disabled:!e.value.enable_storage,placeholder:l.$t("views.setting.placeholder_max_size"),modelValue:e.value.max_size,"onUpdate:modelValue":a[1]||(a[1]=t=>e.value.max_size=t),"w-500":""},{suffix:n(()=>[h(" MB ")]),_:1},8,["disabled","placeholder","modelValue"])]),_:1},8,["label"]),s(i(r),{label:l.$t("views.setting.label_timeout_time"),path:"timeout_time"},{default:n(()=>[s(i(y),{precision:0,disabled:!e.value.enable_storage,placeholder:l.$t("views.setting.placeholder_timeout_time"),modelValue:e.value.timeout_time,"onUpdate:modelValue":a[2]||(a[2]=t=>e.value.timeout_time=t),"w-500":""},{suffix:n(()=>[h(" ç§’ ")]),_:1},8,["disabled","placeholder","modelValue"])]),_:1},8,["label"]),s(i(r),{label:l.$t("views.setting.label_endpoint"),path:"endpoint"},{default:n(()=>[s(i(m),{modelValue:e.value.endpoint,"onUpdate:modelValue":a[3]||(a[3]=t=>e.value.endpoint=t),type:"text",placeholder:l.$t("views.setting.placeholder_endpoint"),disabled:!e.value.enable_storage,clearable:""},null,8,["modelValue","placeholder","disabled"])]),_:1},8,["label"]),s(i(r),{label:l.$t("views.setting.label_region"),path:"region"},{default:n(()=>[s(i(m),{modelValue:e.value.region,"onUpdate:modelValue":a[4]||(a[4]=t=>e.value.region=t),type:"text",placeholder:l.$t("views.setting.placeholder_region"),disabled:!e.value.enable_storage,clearable:""},null,8,["modelValue","placeholder","disabled"])]),_:1},8,["label"]),s(i(r),{label:l.$t("views.setting.label_access_id"),path:"access_id"},{default:n(()=>[s(i(m),{modelValue:e.value.access_id,"onUpdate:modelValue":a[5]||(a[5]=t=>e.value.access_id=t),type:"text",placeholder:l.$t("views.setting.placeholder_access_id"),disabled:!e.value.enable_storage,clearable:""},null,8,["modelValue","placeholder","disabled"])]),_:1},8,["label"]),s(i(r),{label:l.$t("views.setting.label_secret_key"),path:"secret_key"},{default:n(()=>[s(i(m),{modelValue:e.value.secret_key,"onUpdate:modelValue":a[6]||(a[6]=t=>e.value.secret_key=t),type:"text",placeholder:l.$t("views.setting.placeholder_secret_key"),disabled:!e.value.enable_storage,clearable:""},null,8,["modelValue","placeholder","disabled"])]),_:1},8,["label"]),s(i(r),{label:l.$t("views.setting.label_bucket"),path:"bucket"},{default:n(()=>[s(i(m),{modelValue:e.value.bucket,"onUpdate:modelValue":a[7]||(a[7]=t=>e.value.bucket=t),type:"text",placeholder:l.$t("views.setting.placeholder_bucket"),disabled:!e.value.enable_storage,clearable:""},null,8,["modelValue","placeholder","disabled"])]),_:1},8,["label"]),s(i(r),{label:l.$t("views.setting.label_path"),path:"path"},{default:n(()=>[s(i(m),{modelValue:e.value.path,"onUpdate:modelValue":a[8]||(a[8]=t=>e.value.path=t),type:"text",placeholder:l.$t("views.setting.placeholder_path",{path:"/{year}/{month}/{timestamp}_{filename}"}),disabled:!e.value.enable_storage,clearable:""},null,8,["modelValue","placeholder","disabled"])]),_:1},8,["label"]),s(i(r),{label:l.$t("views.setting.label_prefix"),path:"prefix"},{default:n(()=>[s(i(m),{modelValue:e.value.prefix,"onUpdate:modelValue":a[9]||(a[9]=t=>e.value.prefix=t),type:"text",placeholder:l.$t("views.setting.placeholder_prefix"),disabled:!e.value.enable_storage,clearable:""},null,8,["modelValue","placeholder","disabled"])]),_:1},8,["label"]),s(i(B),{type:"primary",loading:u.value,onClick:a[10]||(a[10]=t=>d(!0))},{default:n(()=>[h(I(l.$t("common.buttons.save")),1)]),_:1},8,["loading"])]),_:1},8,["model"])])]),_:1},8,["title"]))}};export{E as default};
