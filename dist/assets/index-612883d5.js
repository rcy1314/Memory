var p=(h,f,c)=>new Promise((n,u)=>{var _=r=>{try{m(c.next(r))}catch(d){u(d)}},e=r=>{try{m(c.throw(r))}catch(d){u(d)}},m=r=>r.done?n(r.value):Promise.resolve(r.value).then(_,e);m((c=c.apply(h,f)).next())});import{a0 as w,dO as k,a4 as V,r as v,o as S,P as y,Q as $,R as i,Z as N,$ as s,U as o,aH as j,X as F,Y as U,ay as B}from"./index-be94632c.js";import{_ as R,a as g,N as I}from"./CommonPage-7e5436b1.js";import{N as b}from"./Input-147bc994.js";import"./format-length-c9d165c6.js";import"./use-locale-5356ed31.js";import"./AppPage-98713723.js";import"./_plugin-vue_export-helper-c27b6911.js";const C={class:"m-30 flex items-center"},Q={__name:"index",setup(h){const{t:f}=w(),c=k(),n=V(),u=v(!1),_=v(null),e=v({workbench_title:"",workbench_desc:"",custom_css:"",custom_js:""});function m(){e.value={workbench_title:n.generalSetting.workbench_title||"",workbench_desc:n.generalSetting.workbench_desc||"",custom_css:n.generalSetting.custom_css||"",custom_js:n.generalSetting.custom_js||""}}S(()=>p(this,null,function*(){yield n.getGeneralSetting(),m()}));function r(){return p(this,null,function*(){var t;u.value=!0,(t=_.value)==null||t.validate(l=>p(this,null,function*(){if(l){u.value=!1;return}var a=n.totalSetting;a.general=e.value,yield B.updateSetting(a).then(()=>{n.setGeneralSetting(e.value),u.value=!1,c.success(f("common.text.save_success"))}).catch(()=>{u.value=!1})}))})}const d={};return(t,l)=>(y(),$(R,{title:t.$t("views.setting.label_general_setting")},{default:i(()=>[N("div",C,[s(o(I),{ref_key:"infoFormRef",ref:_,"label-placement":"top","label-align":"left","label-width":"100",model:e.value,rules:d,class:"w-500"},{default:i(()=>[s(o(g),{label:t.$t("views.setting.label_workbench_title"),path:"workbench_title"},{default:i(()=>[s(o(b),{modelValue:e.value.workbench_title,"onUpdate:modelValue":l[0]||(l[0]=a=>e.value.workbench_title=a),type:"text",placeholder:t.$t("views.setting.placeholder_workbench_title",{username:"{username}"})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(o(g),{label:t.$t("views.setting.label_workbench_desc"),path:"workbench_desc"},{default:i(()=>[s(o(b),{modelValue:e.value.workbench_desc,"onUpdate:modelValue":l[1]||(l[1]=a=>e.value.workbench_desc=a),type:"text",placeholder:t.$t("views.setting.placeholder_workbench_desc",{username:"{username}"})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(o(g),{label:t.$t("views.setting.label_custom_css"),path:"custom_css"},{default:i(()=>[s(o(b),{modelValue:e.value.custom_css,"onUpdate:modelValue":l[2]||(l[2]=a=>e.value.custom_css=a),type:"textarea",placeholder:t.$t("views.setting.placeholder_custom_css")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(o(g),{label:t.$t("views.setting.label_custom_js"),path:"custom_js"},{default:i(()=>[s(o(b),{modelValue:e.value.custom_js,"onUpdate:modelValue":l[3]||(l[3]=a=>e.value.custom_js=a),type:"textarea",placeholder:t.$t("views.setting.placeholder_custom_js")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(o(j),{type:"primary",loading:u.value,onClick:r},{default:i(()=>[F(U(t.$t("common.buttons.save")),1)]),_:1},8,["loading"])]),_:1},8,["model"])])]),_:1},8,["title"]))}};export{Q as default};
