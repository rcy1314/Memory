var R=(u,e,r)=>new Promise((d,f)=>{var m=a=>{try{s(r.next(a))}catch(o){f(o)}},t=a=>{try{s(r.throw(a))}catch(o){f(o)}},s=a=>a.done?d(a.value):Promise.resolve(a.value).then(m,t);s((r=r.apply(u,e)).next())});import{_ as q}from"./AppPage-Dsgp7csD.js";import{c as k,b as y,d as J,h as _,aE as N,u as K,g as W,aF as Y,aG as ee,j as te,k as ae,a1 as se,r as j,a2 as oe,a5 as ne,a6 as T,P as E,R as c,az as I,M as ie,a7 as le,Q as h,_ as l,a0 as g,aH as re,X as D,aI as ce,W as x,Z as $,T as H,F as L,U as O,L as ue}from"./index-CWFJs7gC.js";import{N as fe}from"./Space-clXW8pBo.js";import{N as me}from"./Icon-Dic7jx24.js";import{N as de}from"./Image-xAB7UrIK.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./format-length-B-p6aW7q.js";import"./use-locale-EYmsExNA.js";import"./Tooltip-50tU-hD1.js";import"./Popover-R3LBGIk-.js";const _e=k("statistic",[y("label",`
 font-weight: var(--n-label-font-weight);
 transition: .3s color var(--n-bezier);
 font-size: var(--n-label-font-size);
 color: var(--n-label-text-color);
 `),k("statistic-value",`
 margin-top: 4px;
 font-weight: var(--n-value-font-weight);
 `,[y("prefix",`
 margin: 0 4px 0 0;
 font-size: var(--n-value-font-size);
 transition: .3s color var(--n-bezier);
 color: var(--n-value-prefix-text-color);
 `,[k("icon",{verticalAlign:"-0.125em"})]),y("content",`
 font-size: var(--n-value-font-size);
 transition: .3s color var(--n-bezier);
 color: var(--n-value-text-color);
 `),y("suffix",`
 margin: 0 0 0 4px;
 font-size: var(--n-value-font-size);
 transition: .3s color var(--n-bezier);
 color: var(--n-value-suffix-text-color);
 `,[k("icon",{verticalAlign:"-0.125em"})])])]),ge=Object.assign(Object.assign({},W.props),{tabularNums:Boolean,label:String,value:[String,Number]}),ve=J({name:"Statistic",props:ge,slots:Object,setup(u){const{mergedClsPrefixRef:e,inlineThemeDisabled:r,mergedRtlRef:d}=K(u),f=W("Statistic","-statistic",_e,Y,u,e),m=ee("Statistic",d,e),t=te(()=>{const{self:{labelFontWeight:a,valueFontSize:o,valueFontWeight:p,valuePrefixTextColor:b,labelTextColor:B,valueSuffixTextColor:w,valueTextColor:S,labelFontSize:z},common:{cubicBezierEaseInOut:C}}=f.value;return{"--n-bezier":C,"--n-label-font-size":z,"--n-label-font-weight":a,"--n-label-text-color":B,"--n-value-font-weight":p,"--n-value-font-size":o,"--n-value-prefix-text-color":b,"--n-value-suffix-text-color":w,"--n-value-text-color":S}}),s=r?ae("statistic",void 0,t,u):void 0;return{rtlEnabled:m,mergedClsPrefix:e,cssVars:r?void 0:t,themeClass:s==null?void 0:s.themeClass,onRender:s==null?void 0:s.onRender}},render(){var u;const{mergedClsPrefix:e,$slots:{default:r,label:d,prefix:f,suffix:m}}=this;return(u=this.onRender)===null||u===void 0||u.call(this),_("div",{class:[`${e}-statistic`,this.themeClass,this.rtlEnabled&&`${e}-statistic--rtl`],style:this.cssVars},N(d,t=>_("div",{class:`${e}-statistic__label`},this.label||t)),_("div",{class:`${e}-statistic-value`,style:{fontVariantNumeric:this.tabularNums?"tabular-nums":""}},N(f,t=>t&&_("span",{class:`${e}-statistic-value__prefix`},t)),this.value!==void 0?_("span",{class:`${e}-statistic-value__content`},this.value):N(r,t=>t&&_("span",{class:`${e}-statistic-value__content`},t)),N(m,t=>t&&_("span",{class:`${e}-statistic-value__suffix`},t))))}}),pe={"flex-1":""},be={"mb-15":""},he={flex:"","items-center":"","justify-between":""},xe={flex:"","items-center":""},we=["src"],Se={"ml-10":""},ze={"text-20":"","font-semibold":""},Ce={"mt-5":"","text-14":"","op-60":""},ke={flex:"","flex-wrap":"",style:{"row-gap":"10px","column-gap":"10px","flex-direction":"row"}},ye={"op-60":""},Ie={__name:"index",setup(u){var w,S,z,C,P,V;const{t:e}=se({useScope:"global"}),r=ie(),d=()=>{r.push("/")};var f=j([]),m=j([]);function t(){return R(this,null,function*(){const n=yield I.getBlogAndCategoryCount();n.code===200&&(f.value=[{id:0,label:e("views.workbench.label_number_of_blogs"),value:`${n.data.blog}`},{id:0,label:e("views.workbench.label_number_of_images"),value:`${n.data.image}`},{id:1,label:e("views.workbench.label_number_of_categories"),value:`${n.data.category}`}])})}function s(){return R(this,null,function*(){const n=yield I.getBlogs({page:1,page_size:20,order_option:"created_at_desc"});return n.code==200?n.data:[]})}const a=oe(),o=ne();var p=T((w=o.generalSetting)==null?void 0:w.workbench_title)?(S=o.generalSetting)==null?void 0:S.workbench_title:"Hello，{username}",b=T((z=o.generalSetting)==null?void 0:z.workbench_desc)?(C=o.generalSetting)==null?void 0:C.workbench_desc:"今天又是元气满满的一天~~",B=T((P=o.contentSetting)==null?void 0:P.thumbnail_suffix)?(V=o.contentSetting)==null?void 0:V.thumbnail_suffix:"";return p=p.replaceAll("{username}",a.name),b=b.replaceAll("{username}",a.name),t(),s().then(n=>{m.value=n.map(i=>(i.images&&i.images.length>0&&i.images[0].image_url?i.image=i.images[0].image_url+B:i.image="/assets/error.svg",i))}),(n,i)=>{const M=me,F=re,U=ve,G=fe,A=ce,Q=le("router-link"),X=de,Z=q;return h(),E(Z,{"show-footer":!1},{default:c(()=>[l("div",pe,[l("div",be,[g(F,{onClick:d,type:"primary",ghost:"",title:"返回首页"},{icon:c(()=>[g(M,null,{default:c(()=>i[0]||(i[0]=[l("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z",fill:"currentColor"})],-1)])),_:1})]),default:c(()=>[i[1]||(i[1]=D(" 返回首页 "))]),_:1})]),g(A,{"rounded-10":""},{default:c(()=>[l("div",he,[l("div",xe,[l("img",{"rounded-full":"",width:"60",src:x(a).avatar},null,8,we),l("div",Se,[l("p",ze,$(x(p)),1),l("p",Ce,$(x(b)),1)])]),g(G,{size:12,wrap:!1},{default:c(()=>[(h(!0),H(L,null,O(x(f),v=>(h(),E(U,ue({key:v.id,ref_for:!0},v,{style:{"text-align":"center","margin-right":"8px"}}),null,16))),128))]),_:1})])]),_:1}),g(A,{title:n.$t("views.workbench.label_latest"),size:"small",segmented:!0,"mt-15":"","rounded-10":""},{"header-extra":c(()=>[g(Q,{to:"/admin/content/blog"},{default:c(()=>[g(F,{text:"",type:"primary"},{default:c(()=>[D($(n.$t("views.workbench.label_more")),1)]),_:1})]),_:1})]),default:c(()=>[l("div",ke,[(h(!0),H(L,null,O(x(m),v=>(h(),E(X,{key:v.id,src:v.image,width:300,height:150,class:"gallery-image",style:{"border-radius":"8px"},"show-toolbar-tooltip":""},{default:c(()=>[l("p",ye,$(v.image),1)]),_:2},1032,["src"]))),128))])]),_:1},8,["title"])])]),_:1})}}};export{Ie as default};
